<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Text Blocks Interface</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,500&display=swap" rel="stylesheet">
    <style>
        /* Reset Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        /* Common Styles */
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #a7b1b7;
            color: #333;
        }
        /* Navigation Bar */
        .navbar {
            background-color: #ba0c2f;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            color: #fff;
        }
        .navbar h1 {
            font-size: 24px;
            font-weight: 500;
        }
        /* Main Container */
        .container {
            max-width: 90%;
            margin: 60px auto;
            padding: 0 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        /* Block Styles */
        .block-container {
            padding: 30px 20px;
        }
        .text-block {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            padding: 15px;
            font-size: 16px;
            background-color: #f2f2f2;
            border: 1px solid #ccc;
            border-radius: 5px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-bottom: 5px; /* Adjust margin to keep space for extra content */
        }
        .text-block.selected {
            background-color: #cce5ff;
            border-color: #3399ff;
        }
        .text-content {
            flex-grow: 1;
            padding-right: 40px;
        }
        .dropdown-button {
            width: 25px;
            height: 25px;
            background-color: #767676;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            transition: transform 0.3s;
        }
        .extra-content {
            display: none;
            padding: 10px;
            margin-top: -5px;
            color: #333;
            font-size: 14px;
            line-height: 1.4;
            background-color: #f9f9f9;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        /* Show extra content */
        .text-block.show + .extra-content {
            display: block;
        }
        /* Copy Button */
        button.copy-button {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            font-weight: 500;
            color: #fff;
            background-color: #1a73e8;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button.copy-button:hover {
            background-color: #1669c1;
        }
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            color: #777;
            font-size: 14px;
        }
    </style>
</head>
<body>

    <!-- Navigation Bar -->
    <div class="navbar">
        <h1>ECE 6-Axis Programming Interface</h1>
    </div>

    <!--
        Boiler plate code to create each dropdown block

        <div class="text-block" id="textBlock#" onclick="selectBlock(#)">
        <div class="text-content">Code for Lab #</div>
        <button class="dropdown-button" onclick="toggleDropdown(event, #)">▲</button>
        </div>
        <div class="extra-content" id="extraContent#"><pre>
        This is additional text for Block # that appears on expansion.
        </pre></div>
    
        JavaScript handles the logic for displaying the hidden code. 
        The hidden code is stored in the extra content section.
        When the copy button is pushed, the code will be copied to the local strorage of the webbrowser under the name codeText as well as the clipboard. 
        The <pre> and </pre> are not copied, and are used to allow the text in the block to be eaiser to insert in the code. 
        # is any place when a number should be inserted, and the nuber denotes each block. The number is arbitrary. 1-10 are currently used for consistancy.
        See toggleDropdowns and selectBlock in the javascript for further details. 
        
        Still needs actual code for each block.
    -->

    <!-- Main Content Container -->
    <div class="container">
        <div class="block-container">
            <!-- 10 Selectable Text Blocks with Expandable Content -->
            <div class="text-block" id="textBlock1" onclick="selectBlock(1)">
                <div class="text-content">Code for Lab 1</div>
                <button class="dropdown-button" onclick="toggleDropdown(event, 1)">▲</button>
            </div>
            <!-- Move extra-content below each block -->
            <!-- currently stores temporary code-->
            <div class="extra-content" id="extraContent1"><code><pre> 
#GetPositons.py file
import numpy as np
import math

def get_pos(polar):
    if(polar)
        r = robot.posr
        theta = robot.posθ
        phi = robot.posø
        ret [r, theta, phi]
    else
        x = robot.posx
        y = robot.posy
        z = robot.posz
        ret [x, y, z]

def orintation_Calc(m1,n):
    i = 0
    mreturn = np.array([0,0])
    for ø in robot.angles
        l = robot.length[i]
        inter = np.array([math.cos(ø),-math.sin(ø)],[math.sin(ø),math.cos(ø)]) @ np.array([1,0])
        mreturn = mreturn+l*inter
        if i == n:
            break
        i+=1

            </code></pre></div>

            <div class="text-block" id="textBlock2" onclick="selectBlock(2)">
                <div class="text-content">Code for Lab 2</div>
                <button class="dropdown-button" onclick="toggleDropdown(event, 2)">▲</button>
            </div>
            <div class="extra-content" id="extraContent2">This is additional text for Block 2 that appears on expansion.</div>

            <div class="text-block" id="textBlock3" onclick="selectBlock(3)">
                <div class="text-content">Code for Lab 3</div>
                <button class="dropdown-button" onclick="toggleDropdown(event, 3)">▲</button>
            </div>
            <div class="extra-content" id="extraContent3">This is additional text for Block 3 that appears on expansion.</div>

            <div class="text-block" id="textBlock4" onclick="selectBlock(4)">
                <div class="text-content">Code for Lab 4</div>
                <button class="dropdown-button" onclick="toggleDropdown(event, 4)">▲</button>
            </div>
            <div class="extra-content" id="extraContent4">This is additional text for Block 4 that appears on expansion.</div>

            <div class="text-block" id="textBlock5" onclick="selectBlock(5)">
                <div class="text-content">Code for Lab 5</div>
                <button class="dropdown-button" onclick="toggleDropdown(event, 5)">▲</button>
            </div>
            <div class="extra-content" id="extraContent5">This is additional text for Block 5 that appears on expansion.</div>

            <div class="text-block" id="textBlock6" onclick="selectBlock(6)">
                <div class="text-content">Code for Lab 6</div>
                <button class="dropdown-button" onclick="toggleDropdown(event, 6)">▲</button>
            </div>
            <div class="extra-content" id="extraContent6">This is additional text for Block 6 that appears on expansion.</div>

            <div class="text-block" id="textBlock7" onclick="selectBlock(7)">
                <div class="text-content">Code for Lab 7</div>
                <button class="dropdown-button" onclick="toggleDropdown(event, 7)">▲</button>
            </div>
            <div class="extra-content" id="extraContent10">This is additional text for Block 7 that appears on expansion.</div>

            <div class="text-block" id="textBlock8" onclick="selectBlock(8)">
                <div class="text-content">Code for Lab 8</div>
                <button class="dropdown-button" onclick="toggleDropdown(event, 8)">▲</button>
            </div>
            <div class="extra-content" id="extraContent8">This is additional text for Block 8 that appears on expansion.</div>

            <div class="text-block" id="textBlock9" onclick="selectBlock(9)">
                <div class="text-content">Code for Lab 9</div>
                <button class="dropdown-button" onclick="toggleDropdown(event, 9)">▲</button>
            </div>
            <div class="extra-content" id="extraContent9">This is additional text for Block 9 that appears on expansion.</div>

            <div class="text-block" id="textBlock10" onclick="selectBlock(10)">
                <div class="text-content">Code for Lab 10</div>
                <button class="dropdown-button" onclick="toggleDropdown(event, 10)">▲</button>
            </div>
            <div class="extra-content" id="extraContent10">This is additional text for Block 10 that appears on expansion.</div>

            <!-- Single Copy Button -->
            <button class="copy-button" onclick="copySelectedText()">Copy Selected Text</button>
        </div>
    </div>


    <!-- Footer -->
    <div class="footer">
        <ul class="footers">
            <li>&copy; 2024 ECE Capstone Team 1. Zero rights reserved.</li>
            <li><a href="{% url 'sitemap' %}">Site Map</a></li>
        </ul>
    </div>

    <script>
        let selectedBlockId = null;
        /*
        * Function is called whenever a block is clicked.
        *
        * By passing in the blockId as to the function, string manipulation can add and remove the selected tag.
        * The selectedBlockId is also used in copySelectedText.
        * 
        * Updates selectedBlockId to blockId
        */
        function selectBlock(blockId) {
            if (selectedBlockId) {
                document.getElementById(`textBlock${selectedBlockId}`).classList.remove('selected');
            }
            selectedBlockId = blockId;
            document.getElementById(`textBlock${blockId}`).classList.add('selected');
        }

        /*
        * Copies the text to the clipboard and to the local storage name codeText.
        * Takes the text from the selected text box.
        * 
        * No changes to the variables. 
        */
        function copySelectedText() {
            if (selectedBlockId) {
                const selectedText = document.getElementById(`extraContent${selectedBlockId}`).textContent.trim();
                navigator.clipboard.writeText(selectedText).then(() => {
                    localStorage.setItem("codeText", selectedText);
                    alert('Selected text copied to workspace and clipboard!');
                }).catch(err => {
                    alert('Failed to copy text.');
                });
            } else {
                alert('Please select a block first.');
            }
        }

        /*
        * The function changes the display type of the extra content
        * None hides the code, while block show it
        * Also changes the arrow direction.
        * 
        * No changes to the variables.
        */
        function toggleDropdown(event, blockId) {
            event.stopPropagation();
            const block = document.getElementById(`textBlock${blockId}`);
            const extraContent = document.getElementById(`extraContent${blockId}`);
            const button = block.querySelector('.dropdown-button');

            if (extraContent.style.display === 'block') {
                extraContent.style.display = 'none';
                button.innerHTML = '▲';
            } else {
                extraContent.style.display = 'block';
                button.innerHTML = '▼';
            }
        }
    </script>

</body>
</html>